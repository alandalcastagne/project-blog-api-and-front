{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { AdminPanelComponent } from '../admin-panel/admin-panel.component';\nimport { GlobalVariables } from 'src/app/app.globals';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/app.functions\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/forms\";\nexport let EditPostComponent = /*#__PURE__*/(() => {\n  class EditPostComponent {\n    constructor(http, loginService, router) {\n      this.http = http;\n      this.loginService = loginService;\n      this.router = router;\n      this.categories = [];\n      this.PostId = 0;\n      http.get(GlobalVariables.getAllCategoriesApiUrl).subscribe(data => {\n        this.categories = data;\n      }, error => console.log(error));\n      this.PostId = AdminPanelComponent.idPost;\n    }\n    ngOnInit() {\n      if (!this.PostId) {\n        this.router.navigate(['/admin-panel']);\n      }\n      this.loginService.checkIfUserIsLoggedIn();\n      this.getPostById().subscribe(data => this.post = {\n        id: data.id,\n        title: data.title,\n        description: data.description,\n        date: data.date,\n        categoryFK: data.categoryFK,\n        category: data.category\n      });\n      this.getPostById().subscribe(res => this.putObj = {\n        id: res.id,\n        title: res.title,\n        description: res.description,\n        date: res.date,\n        categoryFK: res.categoryFK,\n        category: res.category\n      });\n    }\n    getPostById() {\n      return this.http.get(GlobalVariables.getPostByIdApiUrl + this.PostId);\n    }\n    onClickSubmit(data) {\n      const now = new Date();\n      let headers = new HttpHeaders();\n      headers.append('Content-Type', 'application/json');\n      if (data.title == '' && data.description != '') {\n        this.putObj.description = data.description;\n      } else if (data.title != '' && data.description == '') {\n        this.putObj.title = data.title;\n      } else if (data.title != '' && data.description != '') {\n        this.putObj.title = data.title;\n        this.putObj.description = data.description;\n      }\n      this.putObj.date = now.toLocaleDateString();\n      this.http.put(GlobalVariables.editPostByIdApiUrl + this.PostId, this.putObj, {\n        headers: headers\n      }).subscribe(res => {\n        alert(\"Post \" + this.post?.title + \"Edited!\"), this.router.navigate(['/admin-panel']);\n      });\n    }\n  }\n  EditPostComponent.ɵfac = function EditPostComponent_Factory(t) {\n    return new (t || EditPostComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  EditPostComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EditPostComponent,\n    selectors: [[\"edit-post\"]],\n    decls: 17,\n    vars: 2,\n    consts: [[\"charset\", \"utf-8\"], [1, \"boxPostData\"], [3, \"ngSubmit\"], [\"postId\", \"ngForm\"], [\"type\", \"text\", \"name\", \"title\", \"placeholder\", \"Title\", \"ngModel\", \"\", 3, \"value\"], [\"name\", \"description\", \"ngModel\", \"\", 3, \"value\"], [\"type\", \"submit\", 1, \"button-submit-edit-post\"]],\n    template: function EditPostComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"html\")(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 0)(3, \"title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"body\")(5, \"div\", 1)(6, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function EditPostComponent_Template_form_ngSubmit_6_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const _r0 = i0.ɵɵreference(7);\n          return i0.ɵɵresetView(ctx.onClickSubmit(_r0.value));\n        });\n        i0.ɵɵelementStart(8, \"h3\");\n        i0.ɵɵtext(9, \"Title\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"input\", 4);\n        i0.ɵɵelementStart(11, \"h3\");\n        i0.ɵɵtext(12, \" Description \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"textarea\", 5)(14, \"br\");\n        i0.ɵɵelementStart(15, \"button\", 6);\n        i0.ɵɵtext(16, \"Submit\");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.post == null ? null : ctx.post.title);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"value\", ctx.post == null ? null : ctx.post.description);\n      }\n    },\n    dependencies: [i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.NgModel, i4.NgForm]\n  });\n  return EditPostComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}